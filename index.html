<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const TILE = 32;

// Place a spawner block (type 7) at [6][9]
let worldGrid = [
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,3,0,0,0],
    [0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,7,0,0,0,4,0,0,0,0,0], // <-- 7 is the spawner
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
];

// ...keep houseGrid, inventory, player, etc. as before...

// Add this function for the spawner block drawing
function drawSpawnerBlock(x, y) {
    ctx.save();
    ctx.fillStyle = "#4a0";
    ctx.fillRect(x, y, TILE, TILE);
    ctx.strokeStyle = "#0f0";
    ctx.lineWidth = 3;
    ctx.strokeRect(x+4, y+4, TILE-8, TILE-8);
    ctx.fillStyle = "#fff";
    ctx.font = "bold 12px Segoe UI";
    ctx.fillText("SPAWN", x + 2, y + 18);
    ctx.restore();
}

// Modify drawBlock to include the spawner
function drawBlock(x, y, type) {
    ctx.save();
    if (map === "outside") {
        if (type === 0) { /* ...grass... */ }
        else if (type === 1) { /* ...house... */ }
        else if (type === 2) { /* ...door... */ }
        else if (type === 3) { drawKeyBlock(x, y); }
        else if (type === 4) { /* ...enemy spawn... */ }
        else if (type === 5) { drawCustomBlock(x, y); }
        else if (type === 7) { drawSpawnerBlock(x, y); } // NEW!
    } else {
        // ...inside blocks...
    }
    ctx.restore();
}

// --- Monster Spawner Logic ---
let enemies = [
    { x: 13*TILE, y: 6*TILE, size: TILE, color: "#f55555", health: 3 }
];

// Every 4 seconds, spawn a monster at each spawner block
setInterval(function() {
    if (map !== "outside") return;
    for (let row = 0; row < worldGrid.length; row++) {
        for (let col = 0; col < worldGrid[row].length; col++) {
            if (worldGrid[row][col] === 7) {
                // Only spawn if less than N enemies (optional, to prevent too many)
                if (enemies.length < 12) {
                    // Spawn at spawner tile, slight random offset
                    let ex = col * TILE + Math.floor(Math.random()*8-4);
                    let ey = row * TILE + Math.floor(Math.random()*8-4);
                    enemies.push({ x: ex, y: ey, size: TILE, color: "#f55555", health: 3 });
                }
            }
        }
    }
}, 4000);

// ...rest of your script including drawGame, moveEnemies, controls, etc...

</script>
